# åŸºé‡‘å‘è¡Œå…¬å‘Šæå–ç³»ç»Ÿ - å®Œæ•´APIæ¥å£æ–‡æ¡£

## ğŸ“‹ åŸºç¡€ä¿¡æ¯

- **ç”Ÿäº§ç¯å¢ƒ**: `https://nybrzijdwpdn.sealoshzh.site/api`
- **å¼€å‘ç¯å¢ƒ**: `http://localhost:8000/api`
- **è®¤è¯æ–¹å¼**: Bearer JWT Token
- **æ•°æ®æ ¼å¼**: JSON
- **å­—ç¬¦ç¼–ç **: UTF-8
- **æœ€å¤§æ–‡ä»¶ä¸Šä¼ **: 50MB

### ç¯å¢ƒè¯´æ˜

| ç¯å¢ƒ | åŸºç¡€URL | è¯´æ˜ |
|------|---------|------|
| ç”Ÿäº§ç¯å¢ƒ | `https://nybrzijdwpdn.sealoshzh.site/api` | æ­£å¼çº¿ä¸Šç¯å¢ƒï¼Œæ”¯æŒHTTPS |
| å¼€å‘ç¯å¢ƒ | `http://localhost:8000/api` | æœ¬åœ°å¼€å‘ç¯å¢ƒ |

### ç»Ÿä¸€å“åº”æ ¼å¼

**æˆåŠŸå“åº”:**
```json
{
  "success": true,
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {},
  "meta": {
    "timestamp": "2025-01-15T10:30:00.000Z",
    "requestId": "req_123456789",
    "version": "v1.2.0"
  }
}
```

**é”™è¯¯å“åº”:**
```json
{
  "success": false,
  "code": 400,
  "message": "æ“ä½œå¤±è´¥",
  "error": {
    "type": "ERROR_TYPE",
    "details": [
      {
        "field": "fieldName",
        "code": "ERROR_CODE",
        "message": "å…·ä½“é”™è¯¯ä¿¡æ¯",
        "value": null
      }
    ]
  },
  "meta": {
    "timestamp": "2025-01-15T10:30:00.000Z",
    "requestId": "req_123456789",
    "version": "v1.2.0"
  }
}
```

---

## ğŸ” è®¤è¯æ¥å£ (`/api/auth/`)

### 1. ç”¨æˆ·ç™»å½•

**æ¥å£**: `POST /api/auth/login`
**æƒé™**: æ— éœ€è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "email": "user@example.com",
  "password": "password123",
  "rememberMe": false
}
```

**å‚æ•°è¯´æ˜:**
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| email | string | æ˜¯ | ç”¨æˆ·é‚®ç®± |
| password | string | æ˜¯ | ç”¨æˆ·å¯†ç  |
| rememberMe | boolean | å¦ | æ˜¯å¦è®°ä½ç™»å½•çŠ¶æ€ï¼Œé»˜è®¤false |

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "user": {
      "id": "user_123456",
      "email": "user@example.com",
      "username": "testuser",
      "firstName": "å¼ ",
      "lastName": "ä¸‰",
      "fullName": "å¼ ä¸‰",
      "avatar": "https://example.com/avatar.jpg",
      "role": "user",
      "permissions": ["document:read", "document:write"],
      "settings": {
        "language": "zh-CN",
        "timezone": "Asia/Shanghai",
        "emailNotifications": true,
        "theme": "light"
      },
      "stats": {
        "totalDocuments": 25,
        "totalExtractions": 50,
        "successRate": 96.0
      },
      "isActive": true,
      "isEmailVerified": true,
      "lastLoginAt": "2025-01-15T10:30:00.000Z",
      "createdAt": "2024-12-01T10:00:00.000Z"
    },
    "tokens": {
      "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
      "refreshToken": "refresh_token_string",
      "tokenType": "Bearer",
      "expiresIn": 3600,
      "expiresAt": "2025-01-15T11:30:00.000Z"
    },
    "session": {
      "sessionId": "session_123456",
      "ipAddress": "192.168.1.1",
      "userAgent": "Mozilla/5.0...",
      "location": {
        "country": "ä¸­å›½",
        "city": "åŒ—äº¬"
      }
    }
  }
}
```

**é”™è¯¯å“åº”:**
```json
// 401 - è´¦å·å¯†ç é”™è¯¯
{
  "success": false,
  "code": 401,
  "message": "ç™»å½•å¤±è´¥",
  "error": {
    "type": "AUTHENTICATION_FAILED",
    "details": [
      {
        "field": "credentials",
        "code": "INVALID_CREDENTIALS",
        "message": "é‚®ç®±æˆ–å¯†ç é”™è¯¯"
      }
    ]
  }
}

// 400 - å‚æ•°éªŒè¯é”™è¯¯
{
  "success": false,
  "code": 400,
  "message": "å‚æ•°éªŒè¯å¤±è´¥",
  "error": {
    "type": "VALIDATION_ERROR",
    "details": [
      {
        "field": "email",
        "code": "VALIDATION_ERROR",
        "message": "è¿™ä¸ªå­—æ®µæ˜¯å¿…å¡«é¡¹ã€‚"
      }
    ]
  }
}
```

---

### 2. ç”¨æˆ·æ³¨å†Œ

**æ¥å£**: `POST /api/auth/register`
**æƒé™**: æ— éœ€è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "email": "newuser@example.com",
  "password": "password123",
  "username": "newuser",
  "firstName": "æ",
  "lastName": "å››"
}
```

**å‚æ•°è¯´æ˜:**
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| email | string | æ˜¯ | ç”¨æˆ·é‚®ç®±ï¼Œå¿…é¡»å”¯ä¸€ |
| password | string | æ˜¯ | å¯†ç ï¼Œè‡³å°‘6ä½ |
| username | string | æ˜¯ | ç”¨æˆ·åï¼Œå¿…é¡»å”¯ä¸€ |
| firstName | string | å¦ | å |
| lastName | string | å¦ | å§“ |

**æˆåŠŸå“åº” (201):**
```json
{
  "success": true,
  "code": 201,
  "message": "æ³¨å†ŒæˆåŠŸï¼Œè¯·æŸ¥æ”¶é‚®ä»¶éªŒè¯è´¦å·",
  "data": {
    "user": {
      "id": "user_789012",
      "email": "newuser@example.com",
      "username": "newuser",
      "firstName": "æ",
      "lastName": "å››",
      "isActive": true,
      "isEmailVerified": false,
      "status": "PENDING_EMAIL_VERIFICATION"
    },
    "tokens": {
      "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
      "refreshToken": "refresh_token_string",
      "tokenType": "Bearer",
      "expiresIn": 3600,
      "expiresAt": "2025-01-15T11:30:00.000Z"
    },
    "verification": {
      "emailSent": true,
      "expiresAt": "2025-01-15T11:30:00.000Z"
    }
  }
}
```

---

### 3. Tokenåˆ·æ–°

**æ¥å£**: `POST /api/auth/refresh`
**æƒé™**: æ— éœ€è®¤è¯ï¼ˆéœ€è¦æœ‰æ•ˆçš„RefreshTokenï¼‰

**è¯·æ±‚å‚æ•°:**
```json
{
  "refreshToken": "refresh_token_string"
}
```

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "Tokenåˆ·æ–°æˆåŠŸ",
  "data": {
    "tokens": {
      "accessToken": "new_access_token",
      "refreshToken": "new_refresh_token",
      "tokenType": "Bearer",
      "expiresIn": 3600,
      "expiresAt": "2025-01-15T12:30:00.000Z"
    }
  }
}
```

---

### 4. ç”¨æˆ·ç™»å‡º

**æ¥å£**: `POST /api/auth/logout`
**æƒé™**: éœ€è¦è®¤è¯
**è¯·æ±‚å¤´**: `Authorization: Bearer <access_token>`

**è¯·æ±‚å‚æ•°:**
```json
{
  "logoutAll": false
}
```

**å‚æ•°è¯´æ˜:**
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| logoutAll | boolean | å¦ | æ˜¯å¦ç™»å‡ºæ‰€æœ‰è®¾å¤‡ï¼Œé»˜è®¤false |

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "ç™»å‡ºæˆåŠŸ",
  "data": {
    "loggedOut": true,
    "sessionsTerminated": 1
  }
}
```

---

### 5. é‚®ç®±éªŒè¯

**æ¥å£**: `POST /api/auth/verify-email`
**æƒé™**: æ— éœ€è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "token": "email_verification_token",
  "email": "user@example.com"
}
```

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "é‚®ç®±éªŒè¯æˆåŠŸ",
  "data": {
    "verified": true
  }
}
```

---

### 6. å¿˜è®°å¯†ç 

**æ¥å£**: `POST /api/auth/forgot-password`
**æƒé™**: æ— éœ€è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "email": "user@example.com"
}
```

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "å¯†ç é‡ç½®é‚®ä»¶å·²å‘é€",
  "data": {
    "emailSent": true,
    "expiresAt": "2025-01-15T11:30:00.000Z"
  }
}
```

---

### 7. é‡ç½®å¯†ç 

**æ¥å£**: `POST /api/auth/reset-password`
**æƒé™**: æ— éœ€è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "token": "reset_token_from_email",
  "newPassword": "newpassword123",
  "confirmPassword": "newpassword123"
}
```

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "å¯†ç é‡ç½®æˆåŠŸ",
  "data": {
    "passwordReset": true
  }
}
```

---

## ğŸ“„ æ–‡æ¡£å¤„ç†æ¥å£ (`/api/documents/`)

### 1. æ–‡ä»¶ä¸Šä¼ 

**æ¥å£**: `POST /api/documents/upload`
**æƒé™**: éœ€è¦è®¤è¯
**Content-Type**: `multipart/form-data`

**è¯·æ±‚å‚æ•°:**
```
file: File (PDFæ–‡ä»¶)
documentType: string (æ–‡æ¡£ç±»å‹)
tags: string[] (å¯é€‰æ ‡ç­¾)
description: string (å¯é€‰æè¿°)
folder: string (å¯é€‰æ–‡ä»¶å¤¹)
```

**æ–‡æ¡£ç±»å‹:**
- `fund_contract` - åŸºé‡‘åˆåŒ
- `custody_agreement` - æ‰˜ç®¡åè®®
- `prospectus` - æ‹›å‹Ÿè¯´æ˜ä¹¦
- `quarterly_report` - å­£åº¦æŠ¥å‘Š
- `annual_report` - å¹´åº¦æŠ¥å‘Š
- `other` - å…¶ä»–

**æ–‡ä»¶é™åˆ¶:**
- æ”¯æŒæ ¼å¼: PDF
- æœ€å¤§å¤§å°: 50MB
- é¡µæ•°é™åˆ¶: 1000é¡µ

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "æ–‡ä»¶ä¸Šä¼ æˆåŠŸ",
  "data": {
    "document": {
      "id": "doc_123456",
      "fileName": "fund_contract_20250115.pdf",
      "originalName": "æŸæŸåŸºé‡‘åˆåŒ.pdf",
      "documentType": "fund_contract",
      "fileSize": 5242880,
      "pageCount": 120,
      "mimeType": "application/pdf",
      "checksum": "md5:abcd1234...",
      "tags": ["åŸºé‡‘åˆåŒ", "æ··åˆå‹"],
      "description": "æŸæŸæ··åˆå‹åŸºé‡‘åˆåŒæ–‡æ¡£",
      "folder": "contracts/2025",
      "status": "UPLOADED",
      "metadata": {
        "pdfVersion": "1.4",
        "title": "æŸæŸåŸºé‡‘åˆåŒ",
        "author": "æŸæŸåŸºé‡‘ç®¡ç†å…¬å¸",
        "encrypted": false,
        "hasText": true,
        "hasImages": true
      },
      "urls": {
        "download": "/api/documents/doc_123456/download-original",
        "preview": "/api/documents/doc_123456/preview"
      },
      "uploadedBy": {
        "id": "user_123456",
        "username": "testuser"
      },
      "uploadedAt": "2025-01-15T10:30:00.000Z"
    }
  }
}
```

**é”™è¯¯å“åº”:**
```json
// 413 - æ–‡ä»¶è¿‡å¤§
{
  "success": false,
  "code": 413,
  "message": "æ–‡ä»¶å¤§å°è¶…é™",
  "error": {
    "type": "FILE_TOO_LARGE",
    "details": [
      {
        "field": "file",
        "message": "æ–‡ä»¶å¤§å°è¶…è¿‡50MBé™åˆ¶"
      }
    ]
  }
}

// 415 - æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ
{
  "success": false,
  "code": 415,
  "message": "æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ",
  "error": {
    "type": "UNSUPPORTED_MEDIA_TYPE",
    "details": [
      {
        "field": "file",
        "message": "åªæ”¯æŒPDFæ ¼å¼æ–‡ä»¶"
      }
    ]
  }
}
```

---

### 2. å¼€å§‹æ•°æ®æå–

**æ¥å£**: `POST /api/documents/{documentId}/extract`
**æƒé™**: éœ€è¦è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "extractionConfig": {
    "provider": "deepseek",
    "model": "deepseek-reasoner",
    "apiKey": "sk-your-api-key",
    "baseUrl": "https://api.deepseek.com/v1/chat/completions",
    "temperature": 0.1,
    "maxTokens": 8192,
    "timeout": 120,
    "maxRetries": 3
  },
  "extractionOptions": {
    "mode": "full",
    "fieldsToExtract": [
      "åŸºé‡‘åç§°",
      "åŸºé‡‘ç±»å‹",
      "ç®¡ç†äººåç§°",
      "æ‰˜ç®¡äººåç§°",
      "åŸºé‡‘è§„æ¨¡"
    ],
    "extractionDepth": "detailed",
    "includeConfidence": true,
    "includeSourceReferences": true,
    "validateResults": true,
    "outputFormat": "structured"
  },
  "processingOptions": {
    "priority": "normal",
    "async": true,
    "webhookUrl": "https://your-app.com/webhooks/extraction-complete",
    "notifyOnComplete": true,
    "retainIntermediateResults": false
  },
  "qualitySettings": {
    "minimumConfidence": 0.8,
    "crossValidation": true,
    "humanReview": false,
    "qualityCheckEnabled": true
  }
}
```

**å‚æ•°è¯´æ˜:**
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| extractionConfig.provider | string | æ˜¯ | AIæä¾›å•† (deepseek/openai) |
| extractionConfig.model | string | æ˜¯ | æ¨¡å‹åç§° |
| extractionConfig.apiKey | string | æ˜¯ | APIå¯†é’¥ |
| extractionOptions.mode | string | å¦ | æå–æ¨¡å¼ (full/selective/smart) |
| extractionOptions.fieldsToExtract | array | å¦ | è¦æå–çš„å­—æ®µåˆ—è¡¨ |
| processingOptions.priority | string | å¦ | ä¼˜å…ˆçº§ (low/normal/high/urgent) |

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "æå–ä»»åŠ¡å·²å¯åŠ¨",
  "data": {
    "task": {
      "id": "task_123456",
      "documentId": "doc_123456",
      "status": "PENDING",
      "priority": "normal",
      "estimatedDuration": 180,
      "progress": 0,
      "currentStep": "åˆå§‹åŒ–æå–ä»»åŠ¡",
      "steps": [
        {
          "name": "æ–‡æ¡£é¢„å¤„ç†",
          "status": "pending",
          "estimatedDuration": 30
        },
        {
          "name": "å†…å®¹æå–",
          "status": "pending",
          "estimatedDuration": 120
        },
        {
          "name": "ç»“æœéªŒè¯",
          "status": "pending",
          "estimatedDuration": 30
        }
      ],
      "config": {
        "provider": "deepseek",
        "model": "deepseek-reasoner",
        "fieldsCount": 5,
        "extractionDepth": "detailed"
      },
      "createdAt": "2025-01-15T10:30:00.000Z",
      "estimatedCompletionAt": "2025-01-15T10:33:00.000Z"
    }
  }
}
```

---

### 3. è·å–æå–è¿›åº¦

**æ¥å£**: `GET /api/documents/tasks/{taskId}/progress`
**æƒé™**: éœ€è¦è®¤è¯

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "task": {
      "id": "task_123456",
      "documentId": "doc_123456",
      "status": "PROCESSING",
      "progress": 65,
      "currentStep": "æ­£åœ¨æå–åŸºé‡‘åŸºæœ¬ä¿¡æ¯",
      "currentStepProgress": 80,
      "estimatedTimeRemaining": 42,
      "steps": [
        {
          "name": "æ–‡æ¡£é¢„å¤„ç†",
          "status": "completed",
          "progress": 100,
          "startedAt": "2025-01-15T10:30:00.000Z",
          "completedAt": "2025-01-15T10:30:30.000Z",
          "duration": 30
        },
        {
          "name": "å†…å®¹æå–",
          "status": "processing",
          "progress": 65,
          "startedAt": "2025-01-15T10:30:30.000Z",
          "substeps": [
            {
              "name": "åŸºé‡‘åŸºæœ¬ä¿¡æ¯",
              "status": "processing",
              "progress": 80
            },
            {
              "name": "æŠ•èµ„ä¿¡æ¯",
              "status": "pending",
              "progress": 0
            }
          ]
        },
        {
          "name": "ç»“æœéªŒè¯",
          "status": "pending",
          "progress": 0
        }
      ],
      "statistics": {
        "fieldsProcessed": 15,
        "fieldsTotal": 23,
        "fieldsFound": 12,
        "fieldsNotFound": 3,
        "averageConfidence": 0.92,
        "processingSpeed": "2.3 fields/min"
      },
      "estimatedTimeRemaining": 42,
      "createdAt": "2025-01-15T10:30:00.000Z",
      "startedAt": "2025-01-15T10:30:05.000Z",
      "estimatedCompletionAt": "2025-01-15T10:32:30.000Z"
    }
  }
}
```

**ä»»åŠ¡çŠ¶æ€:**
- `PENDING` - ç­‰å¾…ä¸­
- `PROCESSING` - å¤„ç†ä¸­
- `COMPLETED` - å·²å®Œæˆ
- `FAILED` - å¤±è´¥
- `CANCELLED` - å·²å–æ¶ˆ

---

### 4. è·å–æå–ç»“æœ

**æ¥å£**: `GET /api/documents/tasks/{taskId}/results`
**æƒé™**: éœ€è¦è®¤è¯

**æŸ¥è¯¢å‚æ•°:**
```
format=structured&includeMetadata=true&includeSourceRefs=true
```

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "result": {
      "id": "result_123456",
      "taskId": "task_123456",
      "documentId": "doc_123456",
      "status": "COMPLETED",
      "extractionSummary": {
        "totalFields": 50,
        "extractedFields": 47,
        "fieldsNotFound": 3,
        "averageConfidence": 0.94,
        "overallQuality": "excellent",
        "processingTime": 125,
        "modelUsed": "deepseek-reasoner",
        "extractionMode": "detailed"
      },
      "extractedData": {
        "BASIC_INFO": {
          "åŸºé‡‘åç§°": {
            "value": "æŸæŸæ··åˆå‹è¯åˆ¸æŠ•èµ„åŸºé‡‘",
            "confidence": 0.98,
            "source": {
              "page": 1,
              "coordinates": [100, 200, 400, 220],
              "text": "æŸæŸæ··åˆå‹è¯åˆ¸æŠ•èµ„åŸºé‡‘åŸºé‡‘åˆåŒ"
            },
            "verified": true
          },
          "åŸºé‡‘ç±»å‹": {
            "value": "æ··åˆå‹",
            "confidence": 0.95,
            "source": {
              "page": 1,
              "coordinates": [100, 250, 200, 270],
              "text": "æ··åˆå‹è¯åˆ¸æŠ•èµ„åŸºé‡‘"
            },
            "verified": true
          },
          "ç®¡ç†äººåç§°": {
            "value": "æŸæŸåŸºé‡‘ç®¡ç†æœ‰é™å…¬å¸",
            "confidence": 0.97,
            "source": {
              "page": 2,
              "coordinates": [100, 100, 350, 120],
              "text": "åŸºé‡‘ç®¡ç†äººï¼šæŸæŸåŸºé‡‘ç®¡ç†æœ‰é™å…¬å¸"
            },
            "verified": true
          }
        },
        "INVESTMENT_INFO": {
          "æŠ•èµ„ç›®æ ‡": {
            "value": "åœ¨ä¸¥æ ¼æ§åˆ¶æŠ•èµ„é£é™©çš„å‰æä¸‹ï¼Œè¿½æ±‚è¶…è¶Šä¸šç»©æ¯”è¾ƒåŸºå‡†çš„æŠ•èµ„å›æŠ¥",
            "confidence": 0.93,
            "source": {
              "page": 5,
              "coordinates": [50, 100, 500, 150],
              "text": "æœ¬åŸºé‡‘çš„æŠ•èµ„ç›®æ ‡æ˜¯..."
            },
            "verified": true
          }
        }
      },
      "notFoundFields": [
        {
          "field": "åŸºé‡‘æ‰˜ç®¡è´¹ç‡",
          "reason": "æ–‡æ¡£ä¸­æœªæ˜ç¡®æåŠ",
          "suggestions": ["å¯èƒ½åœ¨è´¹ç”¨è¯´æ˜ç« èŠ‚", "å¯èƒ½ä»¥è¡¨æ ¼å½¢å¼å‘ˆç°"]
        }
      ],
      "qualityMetrics": {
        "dataCompleteness": 0.94,
        "informationAccuracy": 0.96,
        "sourceReliability": 0.95,
        "crossValidationScore": 0.93,
        "overallScore": 0.94
      },
      "warnings": [
        {
          "type": "LOW_CONFIDENCE",
          "field": "åŸºé‡‘è§„æ¨¡",
          "message": "è¯¥å­—æ®µç½®ä¿¡åº¦è¾ƒä½ï¼Œå»ºè®®äººå·¥å¤æ ¸",
          "confidence": 0.72
        }
      ],
      "recommendations": [
        {
          "type": "MANUAL_REVIEW",
          "message": "å»ºè®®äººå·¥å¤æ ¸ä½ç½®ä¿¡åº¦å­—æ®µ",
          "affectedFields": ["åŸºé‡‘è§„æ¨¡"]
        }
      ],
      "processingDetails": {
        "modelUsed": "deepseek-reasoner",
        "tokenConsumed": 15420,
        "apiCallsCount": 8,
        "preprocessingTime": 15,
        "extractionTime": 95,
        "validationTime": 15,
        "totalProcessingTime": 125
      },
      "createdAt": "2025-01-15T10:32:05.000Z",
      "completedAt": "2025-01-15T10:34:10.000Z"
    }
  }
}
```

---

### 5. è·å–å­—æ®µé…ç½®

**æ¥å£**: `GET /api/documents/field-config/{documentType}`
**æƒé™**: éœ€è¦è®¤è¯

**è·¯å¾„å‚æ•°:**
- `documentType`: æ–‡æ¡£ç±»å‹ (fund_contract | custody_agreement | prospectus)

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "documentType": "fund_contract",
    "label": "åŸºé‡‘åˆåŒ",
    "description": "åŸºé‡‘åˆåŒæ–‡æ¡£å­—æ®µé…ç½®",
    "version": "v2.1",
    "totalFields": 85,
    "lastUpdated": "2025-01-10T00:00:00.000Z",
    "modules": [
      {
        "module": "BASIC_INFO",
        "label": "åŸºé‡‘åŸºæœ¬ä¿¡æ¯",
        "description": "åŸºé‡‘çš„åŸºç¡€ä¿¡æ¯ï¼ŒåŒ…æ‹¬åç§°ã€ç±»å‹ç­‰",
        "order": 1,
        "required": true,
        "fieldCount": 15,
        "fields": [
          {
            "key": "åŸºé‡‘åç§°",
            "label": "åŸºé‡‘åç§°",
            "description": "åŸºé‡‘çš„å®Œæ•´æ³•å®šåç§°",
            "type": "text",
            "dataType": "string",
            "required": true,
            "maxLength": 100,
            "validation": {
              "pattern": ".*åŸºé‡‘$",
              "message": "åŸºé‡‘åç§°åº”ä»¥'åŸºé‡‘'ç»“å°¾"
            },
            "examples": [
              "æŸæŸæ··åˆå‹è¯åˆ¸æŠ•èµ„åŸºé‡‘",
              "ABCå€ºåˆ¸å‹è¯åˆ¸æŠ•èµ„åŸºé‡‘"
            ],
            "searchKeywords": [
              "åŸºé‡‘åç§°",
              "åŸºé‡‘ç®€ç§°",
              "æœ¬åŸºé‡‘"
            ],
            "extractionHints": [
              "é€šå¸¸åœ¨æ–‡æ¡£é¦–é¡µæˆ–æ ‡é¢˜ä¸­",
              "å¯èƒ½åŒ…å«'è¯åˆ¸æŠ•èµ„åŸºé‡‘'å­—æ ·"
            ],
            "confidence": {
              "high": 0.9,
              "medium": 0.7,
              "low": 0.5
            }
          }
        ]
      }
    ]
  }
}
```

---

### 6. è·å–å¤„ç†å†å²

**æ¥å£**: `GET /api/documents/history`
**æƒé™**: éœ€è¦è®¤è¯

**æŸ¥è¯¢å‚æ•°:**
```
page=1&pageSize=20&documentType=fund_contract&status=completed&startDate=2025-01-01&endDate=2025-01-15&sortBy=createdAt&sortOrder=desc&search=åŸºé‡‘åˆåŒ
```

**å‚æ•°è¯´æ˜:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| page | number | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| pageSize | number | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |
| documentType | string | å¦ | æ–‡æ¡£ç±»å‹è¿‡æ»¤ |
| status | string | å¦ | çŠ¶æ€è¿‡æ»¤ |
| startDate | string | å¦ | å¼€å§‹æ—¥æœŸ (YYYY-MM-DD) |
| endDate | string | å¦ | ç»“æŸæ—¥æœŸ (YYYY-MM-DD) |
| sortBy | string | å¦ | æ’åºå­—æ®µ |
| sortOrder | string | å¦ | æ’åºæ–¹å‘ (asc/desc) |
| search | string | å¦ | æœç´¢å…³é”®è¯ |

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "items": [
      {
        "id": "doc_123456",
        "fileName": "æŸæŸåŸºé‡‘åˆåŒ.pdf",
        "originalName": "åŸºé‡‘åˆåŒ-æœ€ç»ˆç‰ˆ.pdf",
        "documentType": "fund_contract",
        "documentTypeLabel": "åŸºé‡‘åˆåŒ",
        "fileSize": 5242880,
        "fileSizeFormatted": "5.0 MB",
        "pageCount": 120,
        "status": "COMPLETED",
        "statusLabel": "å¤„ç†å®Œæˆ",
        "extractionTasks": [
          {
            "id": "task_123456",
            "status": "COMPLETED",
            "fieldsExtracted": 47,
            "totalFields": 50,
            "extractionRate": 0.94,
            "averageConfidence": 0.92,
            "processingTime": 125,
            "completedAt": "2025-01-15T10:34:10.000Z"
          }
        ],
        "tags": ["åŸºé‡‘åˆåŒ", "æ··åˆå‹", "2025å¹´"],
        "folder": "contracts/2025",
        "uploadedBy": {
          "id": "user_123456",
          "username": "testuser",
          "fullName": "å¼ ä¸‰"
        },
        "createdAt": "2025-01-15T10:30:00.000Z",
        "updatedAt": "2025-01-15T10:34:10.000Z",
        "lastAccessedAt": "2025-01-15T15:20:00.000Z",
        "accessCount": 5,
        "downloadCount": 2,
        "shareStatus": "private"
      }
    ],
    "pagination": {
      "page": 1,
      "pageSize": 20,
      "total": 156,
      "totalPages": 8,
      "hasNext": true,
      "hasPrev": false,
      "nextPage": 2,
      "prevPage": null
    },
    "statistics": {
      "totalDocuments": 156,
      "completedDocuments": 145,
      "processingDocuments": 8,
      "failedDocuments": 3,
      "averageProcessingTime": 98,
      "successRate": 0.929
    }
  }
}
```

---

### 7. å¯¼å‡ºæå–ç»“æœ

**æ¥å£**: `POST /api/documents/export`
**æƒé™**: éœ€è¦è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "exportType": "extraction_results",
  "format": "excel",
  "scope": {
    "type": "tasks",
    "taskIds": ["task_123456", "task_123457"],
    "includeMetadata": true,
    "includeSourceReferences": true
  },
  "filters": {
    "fieldsFilter": ["åŸºé‡‘åç§°", "åŸºé‡‘ç±»å‹", "ç®¡ç†äººåç§°"],
    "minimumConfidence": 0.8,
    "documentTypes": ["fund_contract"],
    "dateRange": {
      "startDate": "2025-01-01",
      "endDate": "2025-01-15"
    }
  },
  "options": {
    "groupBy": "documentType",
    "includeCharts": true,
    "includeStatistics": true,
    "template": "standard",
    "language": "zh-CN",
    "watermark": "æœºå¯†æ–‡æ¡£ - ä»…ä¾›å†…éƒ¨ä½¿ç”¨"
  },
  "delivery": {
    "method": "download",
    "email": "user@example.com",
    "webhookUrl": "https://your-app.com/webhooks/export-ready"
  }
}
```

**å‚æ•°è¯´æ˜:**
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| exportType | string | æ˜¯ | å¯¼å‡ºç±»å‹ |
| format | string | æ˜¯ | å¯¼å‡ºæ ¼å¼ (excel/csv/json/pdf) |
| scope.type | string | æ˜¯ | èŒƒå›´ç±»å‹ (tasks/documents/date_range) |
| scope.taskIds | array | å¦ | ä»»åŠ¡IDåˆ—è¡¨ |
| delivery.method | string | æ˜¯ | äº¤ä»˜æ–¹å¼ (download/email/webhook) |

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "å¯¼å‡ºä»»åŠ¡å·²åˆ›å»º",
  "data": {
    "export": {
      "id": "export_123456",
      "status": "PROCESSING",
      "format": "excel",
      "estimatedSize": "2.5 MB",
      "estimatedTime": 30,
      "progress": 0,
      "downloadUrl": null,
      "fileName": "extraction_results_20250115_103000.xlsx",
      "includesData": {
        "documentsCount": 25,
        "tasksCount": 25,
        "fieldsCount": 250,
        "dateRange": {
          "start": "2025-01-01",
          "end": "2025-01-15"
        }
      },
      "expiresAt": "2025-01-16T10:30:00.000Z",
      "createdAt": "2025-01-15T10:30:00.000Z"
    }
  }
}
```

---

### 8. åŸæ–‡æ¡£ä¸‹è½½é“¾æ¥è·å–

**æ¥å£**: `GET /api/documents/{documentId}/download-original`
**æƒé™**: éœ€è¦è®¤è¯

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "downloadUrl": "/api/documents/doc_123456/download-original/serve",
    "fileName": "æŸæŸåŸºé‡‘åˆåŒ.pdf",
    "fileSize": 5242880,
    "expiresAt": "2025-01-15T11:30:00.000Z",
    "accessCode": "download_123456"
  }
}
```

---

### 9. åŸæ–‡æ¡£ä¸‹è½½

**æ¥å£**: `GET /api/documents/{documentId}/download-original/serve`
**æƒé™**: éœ€è¦è®¤è¯
**å“åº”**: ç›´æ¥è¿”å›æ–‡ä»¶æµ

---

## ğŸ‘¤ ç”¨æˆ·ç®¡ç†æ¥å£ (`/api/users/`)

### 1. è·å–ç”¨æˆ·ä¿¡æ¯

**æ¥å£**: `GET /api/users/profile`
**æƒé™**: éœ€è¦è®¤è¯

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "user": {
      "id": "user_123456",
      "email": "user@example.com",
      "username": "testuser",
      "firstName": "å¼ ",
      "lastName": "ä¸‰",
      "fullName": "å¼ ä¸‰",
      "avatar": "https://example.com/avatar/123456.jpg",
      "phone": "+86 138 0013 8000",
      "company": "æŸæŸå…¬å¸",
      "role": "user",
      "permissions": ["document:read", "document:write"],
      "settings": {
        "language": "zh-CN",
        "timezone": "Asia/Shanghai",
        "dateFormat": "YYYY-MM-DD",
        "timeFormat": "24h",
        "emailNotifications": true,
        "smsNotifications": false,
        "theme": "light"
      },
      "stats": {
        "totalDocuments": 25,
        "totalExtractions": 50,
        "successfulExtractions": 48,
        "successRate": 96.0,
        "totalProcessingTime": 3600,
        "averageProcessingTime": 72,
        "favoriteDocumentType": "fund_contract"
      },
      "subscription": {
        "plan": "premium",
        "status": "active",
        "expiresAt": "2025-12-31T23:59:59.000Z",
        "features": ["unlimited_extractions", "priority_processing", "api_access"]
      },
      "isActive": true,
      "isEmailVerified": true,
      "isPhoneVerified": false,
      "lastLoginAt": "2025-01-15T09:30:00.000Z",
      "createdAt": "2024-12-01T10:00:00.000Z",
      "updatedAt": "2025-01-14T16:20:00.000Z"
    }
  }
}
```

---

### 2. æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£**: `PUT /api/users/profile`
**æƒé™**: éœ€è¦è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "firstName": "æ–°å§“",
  "lastName": "æ–°å",
  "phone": "+86 139 0013 9000",
  "company": "æ–°å…¬å¸åç§°",
  "settings": {
    "language": "en-US",
    "timezone": "America/New_York",
    "emailNotifications": false,
    "theme": "dark"
  },
  "bio": "ä¸ªäººç®€ä»‹ä¿¡æ¯"
}
```

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "user": {
      // æ›´æ–°åçš„å®Œæ•´ç”¨æˆ·ä¿¡æ¯
    },
    "changes": [
      {
        "field": "firstName",
        "oldValue": "å¼ ",
        "newValue": "æ–°å§“"
      },
      {
        "field": "settings.language",
        "oldValue": "zh-CN",
        "newValue": "en-US"
      }
    ]
  }
}
```

---

### 3. ä¸Šä¼ å¤´åƒ

**æ¥å£**: `POST /api/users/avatar`
**æƒé™**: éœ€è¦è®¤è¯
**Content-Type**: `multipart/form-data`

**è¯·æ±‚å‚æ•°:**
```
avatar: File (å›¾ç‰‡æ–‡ä»¶)
```

**æ–‡ä»¶é™åˆ¶:**
- æ”¯æŒæ ¼å¼: jpg, jpeg, png, gif, webp
- æœ€å¤§å¤§å°: 5MB
- å»ºè®®å°ºå¯¸: 300x300px

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "å¤´åƒä¸Šä¼ æˆåŠŸ",
  "data": {
    "avatar": {
      "original": "https://example.com/avatar/original/123456.jpg",
      "thumbnail": "https://example.com/avatar/thumb/123456.jpg",
      "small": "https://example.com/avatar/small/123456.jpg",
      "medium": "https://example.com/avatar/medium/123456.jpg"
    },
    "upload": {
      "fileId": "file_123456",
      "fileName": "avatar_123456.jpg",
      "fileSize": 1024000,
      "mimeType": "image/jpeg",
      "uploadedAt": "2025-01-15T10:30:00.000Z"
    }
  }
}
```

---

### 4. ä¿®æ”¹å¯†ç 

**æ¥å£**: `PUT /api/users/password`
**æƒé™**: éœ€è¦è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "currentPassword": "currentpassword123",
  "newPassword": "newpassword123",
  "confirmPassword": "newpassword123"
}
```

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "å¯†ç ä¿®æ”¹æˆåŠŸ",
  "data": {
    "passwordChanged": true,
    "tokensInvalidated": true,
    "requireReauth": true
  }
}
```

---

### 5. è·å–æ´»åŠ¨æ—¥å¿—

**æ¥å£**: `GET /api/users/activity-logs`
**æƒé™**: éœ€è¦è®¤è¯

**æŸ¥è¯¢å‚æ•°:**
```
page=1&pageSize=20&action=login&startDate=2025-01-01&endDate=2025-01-15
```

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "items": [
      {
        "id": "log_123456",
        "action": "USER_LOGIN",
        "details": "ç”¨æˆ·ä»IP 192.168.1.1 ç™»å½•",
        "ipAddress": "192.168.1.1",
        "userAgent": "Mozilla/5.0...",
        "location": {
          "country": "ä¸­å›½",
          "city": "åŒ—äº¬"
        },
        "timestamp": "2025-01-15T10:30:00.000Z",
        "success": true
      }
    ],
    "pagination": {
      "page": 1,
      "pageSize": 20,
      "total": 100,
      "totalPages": 5,
      "hasNext": true,
      "hasPrev": false
    }
  }
}
```

---

## âš™ï¸ ç³»ç»Ÿé…ç½®æ¥å£ (`/api/system/`)

### 1. ä¿å­˜APIé…ç½®

**æ¥å£**: `POST /api/system/users/api-settings`
**æƒé™**: éœ€è¦è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "configs": [
    {
      "provider": "deepseek",
      "apiKey": "sk-your-deepseek-key",
      "baseUrl": "https://api.deepseek.com/v1/chat/completions",
      "modelName": "deepseek-reasoner",
      "maxTokens": 8192,
      "temperature": 0.1,
      "timeout": 120,
      "maxRetries": 3,
      "isDefault": true,
      "isActive": true
    },
    {
      "provider": "openai",
      "apiKey": "sk-your-openai-key",
      "baseUrl": "https://api.openai.com/v1/chat/completions",
      "modelName": "gpt-4",
      "maxTokens": 4096,
      "temperature": 0.1,
      "timeout": 60,
      "maxRetries": 3,
      "isDefault": false,
      "isActive": true
    }
  ],
  "preferences": {
    "autoSelectBestModel": true,
    "fallbackEnabled": true,
    "costOptimization": true
  }
}
```

**å‚æ•°è¯´æ˜:**
| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| configs | array | æ˜¯ | APIé…ç½®åˆ—è¡¨ |
| configs[].provider | string | æ˜¯ | æä¾›å•†åç§° (deepseek/openai) |
| configs[].apiKey | string | æ˜¯ | APIå¯†é’¥ |
| configs[].baseUrl | string | æ˜¯ | APIåŸºç¡€URL |
| configs[].modelName | string | æ˜¯ | æ¨¡å‹åç§° |
| configs[].isDefault | boolean | å¦ | æ˜¯å¦ä¸ºé»˜è®¤é…ç½® |
| configs[].isActive | boolean | å¦ | æ˜¯å¦æ¿€æ´» |

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "APIé…ç½®ä¿å­˜æˆåŠŸ",
  "data": {
    "configId": "config_user_123456",
    "savedAt": "2025-01-15T10:30:00.000Z",
    "configsCount": 2
  }
}
```

---

### 2. è·å–APIé…ç½®

**æ¥å£**: `GET /api/system/users/api-settings`
**æƒé™**: éœ€è¦è®¤è¯

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "configs": [
      {
        "provider": "deepseek",
        "apiKey": "sk-xxx***xxx",
        "baseUrl": "https://api.deepseek.com/v1/chat/completions",
        "modelName": "deepseek-reasoner",
        "timeout": 120,
        "maxRetries": 3,
        "temperature": 0.1,
        "maxTokens": 8192,
        "isDefault": true,
        "isActive": true,
        "isValid": true,
        "lastTested": "2025-01-15T10:00:00.000Z",
        "lastUpdated": "2025-01-15T09:30:00.000Z"
      }
    ],
    "preferences": {
      "autoSelectBestModel": true,
      "fallbackEnabled": true,
      "costOptimization": true
    }
  }
}
```

---

### 3. æµ‹è¯•APIè¿æ¥

**æ¥å£**: `POST /api/system/users/api-settings/test`
**æƒé™**: éœ€è¦è®¤è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "provider": "deepseek",
  "apiKey": "sk-your-api-key",
  "baseUrl": "https://api.deepseek.com/v1/chat/completions",
  "modelName": "deepseek-reasoner"
}
```

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "APIè¿æ¥æµ‹è¯•æˆåŠŸ",
  "data": {
    "testResult": {
      "success": true,
      "responseTime": 850,
      "latency": "850ms",
      "modelInfo": {
        "name": "deepseek-reasoner",
        "provider": "DeepSeek",
        "version": "2024-11-27",
        "contextWindow": 32768,
        "inputCost": "$0.055/1M tokens",
        "outputCost": "$0.28/1M tokens"
      },
      "capabilities": [
        "text-generation",
        "reasoning",
        "code-understanding",
        "multi-language"
      ],
      "testMessage": "APIè¿æ¥æ­£å¸¸ï¼Œæ¨¡å‹å“åº”è‰¯å¥½",
      "performance": {
        "speed": "fast",
        "reliability": "high",
        "qualityScore": 0.92
      },
      "quota": {
        "remaining": "95%",
        "resetAt": "2025-01-16T00:00:00.000Z"
      }
    }
  }
}
```

**é”™è¯¯å“åº”:**
```json
// 408 - è¿æ¥è¶…æ—¶
{
  "success": false,
  "code": 408,
  "message": "APIè¯·æ±‚è¶…æ—¶",
  "error": {
    "type": "API_TIMEOUT",
    "details": [
      {
        "field": "api",
        "message": "APIè¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–è°ƒæ•´è¶…æ—¶è®¾ç½®"
      }
    ]
  }
}

// 503 - è¿æ¥å¤±è´¥
{
  "success": false,
  "code": 503,
  "message": "APIè¿æ¥å¤±è´¥",
  "error": {
    "type": "CONNECTION_ERROR",
    "details": [
      {
        "field": "api",
        "message": "APIè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAPIåœ°å€"
      }
    ]
  }
}
```

---

### 4. è·å–ç³»ç»Ÿç»Ÿè®¡

**æ¥å£**: `GET /api/system/statistics`
**æƒé™**: éœ€è¦è®¤è¯

**æŸ¥è¯¢å‚æ•°:**
```
period=7d&includeDetails=true&groupBy=day
```

**å‚æ•°è¯´æ˜:**
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| period | string | å¦ | æ—¶é—´å‘¨æœŸ (1d/7d/30d) |
| includeDetails | boolean | å¦ | æ˜¯å¦åŒ…å«è¯¦ç»†ä¿¡æ¯ |
| groupBy | string | å¦ | åˆ†ç»„æ–¹å¼ (day/week/month) |

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "overview": {
      "totalDocuments": 1250,
      "totalExtractions": 1890,
      "totalUsers": 125,
      "activeUsers": 89,
      "successRate": 94.8,
      "averageProcessingTime": 87.5,
      "systemHealth": 96.2,
      "uptime": "99.9%"
    },
    "periodStats": {
      "period": "7d",
      "startDate": "2025-01-08T00:00:00.000Z",
      "endDate": "2025-01-15T23:59:59.000Z",
      "documentsUploaded": 85,
      "extractionsCompleted": 102,
      "newUsers": 8,
      "activeUsers": 45,
      "totalProcessingTime": 8925,
      "averageProcessingTime": 87.5,
      "successRate": 96.1
    },
    "documentTypes": [
      {
        "type": "fund_contract",
        "label": "åŸºé‡‘åˆåŒ",
        "count": 520,
        "percentage": 41.6,
        "successRate": 96.3,
        "averageProcessingTime": 95.2
      },
      {
        "type": "custody_agreement",
        "label": "æ‰˜ç®¡åè®®",
        "count": 380,
        "percentage": 30.4,
        "successRate": 94.2,
        "averageProcessingTime": 78.5
      },
      {
        "type": "prospectus",
        "label": "æ‹›å‹Ÿè¯´æ˜ä¹¦",
        "count": 350,
        "percentage": 28.0,
        "successRate": 93.8,
        "averageProcessingTime": 105.3
      }
    ],
    "performance": {
      "systemLoad": {
        "cpu": 45.2,
        "memory": 67.8,
        "disk": 23.4,
        "network": 12.1
      },
      "processingQueue": {
        "pending": 3,
        "processing": 5,
        "completed": 197,
        "failed": 2,
        "averageWaitTime": 15.2
      },
      "apiPerformance": {
        "deepseek": {
          "successRate": 97.2,
          "averageResponseTime": 850,
          "errorRate": 2.8,
          "quota": "89% remaining"
        },
        "openai": {
          "successRate": 95.8,
          "averageResponseTime": 1200,
          "errorRate": 4.2,
          "quota": "76% remaining"
        }
      }
    },
    "trends": {
      "daily": [
        {
          "date": "2025-01-15",
          "documents": 12,
          "extractions": 15,
          "users": 8,
          "successRate": 93.3
        },
        {
          "date": "2025-01-14",
          "documents": 18,
          "extractions": 22,
          "users": 12,
          "successRate": 95.5
        }
      ]
    },
    "topUsers": [
      {
        "userId": "user_123456",
        "username": "å¼ ä¸‰",
        "documentsCount": 45,
        "extractionsCount": 67,
        "successRate": 97.8
      }
    ],
    "errors": {
      "last24h": 5,
      "commonErrors": [
        {
          "type": "API_TIMEOUT",
          "count": 3,
          "percentage": 60.0
        },
        {
          "type": "INVALID_PDF",
          "count": 2,
          "percentage": 40.0
        }
      ]
    }
  }
}
```

---

### 5. ç³»ç»Ÿå¥åº·æ£€æŸ¥

**æ¥å£**: `GET /api/system/health`
**æƒé™**: æ— éœ€è®¤è¯ï¼ˆå…¬å¼€æ¥å£ï¼‰

**æˆåŠŸå“åº” (200):**
```json
{
  "success": true,
  "code": 200,
  "message": "ç³»ç»Ÿå¥åº·",
  "data": {
    "status": "healthy",
    "timestamp": "2025-01-15T10:30:00.000Z",
    "uptime": 86400,
    "version": "v1.2.0",
    "environment": "production",
    "services": {
      "database": {
        "status": "healthy",
        "responseTime": 25,
        "connections": {
          "active": 12,
          "max": 100,
          "idle": 88
        }
      },
      "redis": {
        "status": "healthy",
        "responseTime": 5,
        "memory": {
          "used": "245 MB",
          "max": "2 GB",
          "percentage": 12.25
        }
      },
      "storage": {
        "status": "healthy",
        "available": "850 GB",
        "used": "150 GB",
        "percentage": 15.0
      },
      "aiProviders": {
        "deepseek": {
          "status": "healthy",
          "responseTime": 850,
          "quota": "89%"
        },
        "openai": {
          "status": "healthy",
          "responseTime": 1200,
          "quota": "76%"
        }
      }
    },
    "metrics": {
      "requestsPerSecond": 25.4,
      "averageResponseTime": 145,
      "errorRate": 0.02,
      "memoryUsage": 67.8,
      "cpuUsage": 45.2
    }
  }
}
```

**ç³»ç»ŸçŠ¶æ€:**
- `healthy` - å¥åº·
- `degraded` - é™çº§ï¼ˆéƒ¨åˆ†åŠŸèƒ½å—å½±å“ï¼‰
- `unhealthy` - ä¸å¥åº·

---

## ğŸš¨ é”™è¯¯å¤„ç†

### HTTPçŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç  | å«ä¹‰ | ä½¿ç”¨åœºæ™¯ |
|--------|------|----------|
| 200 | OK | è¯·æ±‚æˆåŠŸ |
| 201 | Created | èµ„æºåˆ›å»ºæˆåŠŸ |
| 400 | Bad Request | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | Unauthorized | æœªæˆæƒï¼Œéœ€è¦ç™»å½• |
| 403 | Forbidden | å·²ç™»å½•ä½†æƒé™ä¸è¶³ |
| 404 | Not Found | èµ„æºä¸å­˜åœ¨ |
| 408 | Request Timeout | è¯·æ±‚è¶…æ—¶ |
| 413 | Payload Too Large | è¯·æ±‚ä½“è¿‡å¤§ |
| 415 | Unsupported Media Type | ä¸æ”¯æŒçš„åª’ä½“ç±»å‹ |
| 422 | Unprocessable Entity | æ•°æ®éªŒè¯å¤±è´¥ |
| 423 | Locked | è´¦å·è¢«é”å®š |
| 429 | Too Many Requests | è¯·æ±‚é¢‘ç‡è¶…é™ |
| 500 | Internal Server Error | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |
| 502 | Bad Gateway | ç½‘å…³é”™è¯¯ |
| 503 | Service Unavailable | æœåŠ¡ä¸å¯ç”¨ |

### ä¸šåŠ¡é”™è¯¯ç 

#### è®¤è¯ç›¸å…³é”™è¯¯
| é”™è¯¯ç  | æè¿° | å¤„ç†æ–¹å¼ |
|--------|------|----------|
| AUTH_001 | é‚®ç®±æˆ–å¯†ç é”™è¯¯ | é‡æ–°è¾“å…¥æ­£ç¡®çš„å‡­æ® |
| AUTH_002 | è´¦å·å·²è¢«é”å®š | ç­‰å¾…è§£é”æ—¶é—´æˆ–è”ç³»ç®¡ç†å‘˜ |
| AUTH_003 | Tokenå·²è¿‡æœŸ | ä½¿ç”¨RefreshTokenè·å–æ–°Token |
| AUTH_004 | Tokenæ— æ•ˆ | é‡æ–°ç™»å½• |
| AUTH_005 | é‚®ç®±æœªéªŒè¯ | éªŒè¯é‚®ç®±åå†è¯• |

#### æ–‡æ¡£å¤„ç†ç›¸å…³é”™è¯¯
| é”™è¯¯ç  | æè¿° | å¤„ç†æ–¹å¼ |
|--------|------|----------|
| DOC_001 | æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ | ä¸Šä¼ PDFæ ¼å¼æ–‡ä»¶ |
| DOC_002 | æ–‡ä»¶å¤§å°è¶…é™ | å‹ç¼©æ–‡ä»¶æˆ–åˆ†å‰²ä¸Šä¼  |
| DOC_003 | æ–‡ä»¶æŸåæˆ–åŠ å¯† | ä¿®å¤æ–‡ä»¶æˆ–è§£é™¤åŠ å¯† |
| DOC_004 | æ–‡æ¡£é¡µæ•°è¶…é™ | åˆ†å‰²æ–‡æ¡£æˆ–è”ç³»ç®¡ç†å‘˜ |
| DOC_005 | æå–ä»»åŠ¡å¤±è´¥ | æ£€æŸ¥æ–‡æ¡£è´¨é‡æˆ–é‡è¯• |

#### AIæœåŠ¡ç›¸å…³é”™è¯¯
| é”™è¯¯ç  | æè¿° | å¤„ç†æ–¹å¼ |
|--------|------|----------|
| AI_001 | APIå¯†é’¥æ— æ•ˆ | æ£€æŸ¥å¹¶æ›´æ–°APIå¯†é’¥ |
| AI_002 | APIé…é¢ä¸è¶³ | ç­‰å¾…é…é¢é‡ç½®æˆ–å‡çº§è®¡åˆ’ |
| AI_003 | æ¨¡å‹æœåŠ¡ä¸å¯ç”¨ | åˆ‡æ¢åˆ°å…¶ä»–æ¨¡å‹æˆ–ç¨åé‡è¯• |
| AI_004 | è¯·æ±‚è¶…æ—¶ | å¢åŠ è¶…æ—¶æ—¶é—´æˆ–é‡è¯• |
| AI_005 | å†…å®¹è¢«æ‹’ç» | æ£€æŸ¥æ–‡æ¡£å†…å®¹æ˜¯å¦ç¬¦åˆæ”¿ç­– |

---

## ğŸ”§ å¼€å‘è°ƒè¯•

### è¯·æ±‚ç¤ºä¾‹

**ä½¿ç”¨curl (ç”Ÿäº§ç¯å¢ƒ):**
```bash
# ç™»å½•
curl -X POST https://nybrzijdwpdn.sealoshzh.site/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "password123"
  }'

# ä¸Šä¼ æ–‡ä»¶ï¼ˆéœ€è¦å…ˆç™»å½•è·å–tokenï¼‰
curl -X POST https://nybrzijdwpdn.sealoshzh.site/api/documents/upload \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@document.pdf" \
  -F "documentType=fund_contract" \
  -F "description=æµ‹è¯•æ–‡æ¡£"

# è·å–ç”¨æˆ·ä¿¡æ¯
curl -X GET https://nybrzijdwpdn.sealoshzh.site/api/users/profile \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ä½¿ç”¨curl (æœ¬åœ°å¼€å‘):**
```bash
# ç™»å½•
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "password123"
  }'

# ä¸Šä¼ æ–‡ä»¶ï¼ˆéœ€è¦å…ˆç™»å½•è·å–tokenï¼‰
curl -X POST http://localhost:8000/api/documents/upload \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@document.pdf" \
  -F "documentType=fund_contract" \
  -F "description=æµ‹è¯•æ–‡æ¡£"

# è·å–ç”¨æˆ·ä¿¡æ¯
curl -X GET http://localhost:8000/api/users/profile \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**ä½¿ç”¨JavaScript (Fetch):**

```javascript
// é…ç½®APIåŸºç¡€URL
const API_BASE_URL = 'https://nybrzijdwpdn.sealoshzh.site/api'; // ç”Ÿäº§ç¯å¢ƒ
// const API_BASE_URL = 'http://localhost:8000/api'; // æœ¬åœ°å¼€å‘ç¯å¢ƒ

// ç™»å½•
const loginResponse = await fetch(`${API_BASE_URL}/auth/login`, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    email: 'user@example.com',
    password: 'password123'
  })
});

const loginData = await loginResponse.json();
const token = loginData.data.tokens.accessToken;

// è·å–ç”¨æˆ·ä¿¡æ¯
const profileResponse = await fetch(`${API_BASE_URL}/users/profile`, {
  headers: {
    'Authorization': `Bearer ${token}`
  }
});

const profileData = await profileResponse.json();
console.log(profileData.data.user);

// æ–‡ä»¶ä¸Šä¼ 
const formData = new FormData();
formData.append('file', fileInput.files[0]);
formData.append('documentType', 'fund_contract');
formData.append('description', 'æµ‹è¯•æ–‡æ¡£');

const uploadResponse = await fetch(`${API_BASE_URL}/documents/upload`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${token}`
  },
  body: formData
});

const uploadData = await uploadResponse.json();
console.log(uploadData.data.document);
```

### å¸¸è§é—®é¢˜è§£å†³

1. **CORSé”™è¯¯**: ç¡®ä¿å‰ç«¯åŸŸååœ¨åç«¯CORSé…ç½®ä¸­
2. **Tokenè¿‡æœŸ**: ä½¿ç”¨refresh tokenåˆ·æ–°æˆ–é‡æ–°ç™»å½•
3. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**: æ£€æŸ¥æ–‡ä»¶å¤§å°å’Œæ ¼å¼
4. **APIè¿æ¥å¤±è´¥**: æ£€æŸ¥APIå¯†é’¥å’Œç½‘ç»œè¿æ¥

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.2.0 (2025-01-15)
- æ–°å¢æ–‡æ¡£æ‰¹é‡å¤„ç†åŠŸèƒ½
- ä¼˜åŒ–AIæ¨¡å‹é…ç½®ç®¡ç†
- å¢å¼ºç³»ç»Ÿç›‘æ§å’Œç»Ÿè®¡
- æ”¹è¿›é”™è¯¯å¤„ç†å’Œå“åº”æ ¼å¼
- æ–°å¢æ–‡æ¡£å¯¼å‡ºåŠŸèƒ½

### v1.1.0 (2024-12-01)
- åŸºç¡€è®¤è¯å’Œç”¨æˆ·ç®¡ç†
- æ–‡æ¡£ä¸Šä¼ å’Œæå–åŠŸèƒ½
- åŸºæœ¬çš„ç³»ç»Ÿé…ç½®

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **é¡¹ç›®åœ°å€**: GitHub Repository
- **é—®é¢˜åé¦ˆ**: Issues
- **é‚®ç®±**: dev@fund-extract.com
- **æ–‡æ¡£**: æœ¬APIæ–‡æ¡£

---

**æ³¨æ„**: 
1. æ‰€æœ‰éœ€è¦è®¤è¯çš„æ¥å£éƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦æœ‰æ•ˆçš„JWT Token
2. æ–‡ä»¶ä¸Šä¼ æ¥å£éœ€è¦ä½¿ç”¨ `multipart/form-data` æ ¼å¼
3. æ‰€æœ‰æ—¥æœŸæ—¶é—´æ ¼å¼å‡ä¸ºISO 8601æ ‡å‡† (YYYY-MM-DDTHH:mm:ss.sssZ)
4. APIæœ‰é¢‘ç‡é™åˆ¶ï¼Œè¯·åˆç†æ§åˆ¶è°ƒç”¨é¢‘ç‡
5. ç”Ÿäº§ç¯å¢ƒ `https://nybrzijdwpdn.sealoshzh.site/api` ä½¿ç”¨HTTPSåè®®ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“å®‰å…¨
6. å¼€å‘ç¯å¢ƒå¯ä»¥ä½¿ç”¨ `http://localhost:8000/api` è¿›è¡Œæœ¬åœ°è°ƒè¯•
