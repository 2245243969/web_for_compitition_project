# 用户信息更新接口修复总结

## 问题描述
用户在设置页面尝试更新个人信息时遇到错误：
```
PUT http://localhost:8000/api/users/profile 405 (Method Not Allowed)
```

## 原因分析
1. **HTTP方法不匹配**：前端使用PUT方法，但后端API可能不支持PUT方法
2. **API文档不一致**：发现两个文档中的接口定义不同：
   - `docs/backend-api-spec.md`: `PUT /users/profile/update`
   - `docs/后端提供的接口.md`: `PUT /api/users/profile`

## 修复方案

### 1. 更改HTTP方法
- **从**: `PUT` 方法
- **到**: `PATCH` 方法
- **原因**: PATCH方法更适合部分更新用户信息

### 2. 确认API路径
- **保持**: `/users/profile`
- **更新注释**: `POST 更新用户信息` → `PATCH 更新用户信息`

## 修改的文件

### `src/config/api-config.js`
```javascript
USERS: {
    PROFILE: '/users/profile',                    // GET 获取用户信息
    UPDATE_PROFILE: '/users/profile',             // PATCH 更新用户信息
    UPLOAD_AVATAR: '/users/avatar',               // POST 上传头像
    CHANGE_PASSWORD: '/users/password',           // PUT 修改密码
    ACTIVITY_LOGS: '/users/activity-logs'         // GET 获取活动日志
}
```

### `src/utils/api.js`
```javascript
const response = await request(API_ROUTES.USERS.UPDATE_PROFILE, {
    method: 'PATCH',  // 从 'PUT' 改为 'PATCH'
    data: requestData
})
```

## 测试建议
1. 尝试更新用户信息，验证是否还有405错误
2. 如果仍有问题，可以尝试：
   - POST方法
   - 检查后端实际支持的HTTP方法
   - 验证请求数据格式是否正确

## 后续优化
1. 统一API文档，确保前后端接口定义一致
2. 添加接口版本控制
3. 完善错误处理和用户提示








